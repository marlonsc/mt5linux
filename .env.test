# =============================================================================
# MT5Linux Test Environment Configuration
# =============================================================================
# This file configures ISOLATED test environment to avoid conflicts with:
# - Production (mt5, ports 8001/3000/8002)
# - tests.(neptor-mt5-test, port 18812)
# - mt5docker tests (mt5docker-test, port 48812)
#
# Configuration Source: mt5linux/settings.py (MT5Settings)
# All values here match test_* defaults in MT5Settings for consistency.
#
# Load order in conftest.py:
#   1. MT5Settings loads from environment + .env
#   2. test_* fields provide isolated defaults
# =============================================================================

# Container Identity
MT5_CONTAINER_NAME=mt5linux-test

# Isolated Test Ports (different from production and other projects)
# These override docker_* ports to use test_* isolated values
MT5_GRPC_PORT=28812
MT5_VNC_PORT=23000
MT5_HEALTH_PORT=28002

# Timeouts (seconds)
MT5_STARTUP_TIMEOUT=420
MT5_GRPC_TIMEOUT=60
MT5_STARTUP_HEALTH_TIMEOUT=30.0

# gRPC Settings
MT5_GRPC_MAX_MESSAGE_SIZE=52428800
MT5_GRPC_KEEPALIVE_TIME_MS=30000
MT5_GRPC_KEEPALIVE_TIMEOUT_MS=10000

# Retry Settings for startup backoff
MT5_RETRY_MIN_INTERVAL=0.5
MT5_RETRY_MAX_INTERVAL=5.0

# =============================================================================
# RESILIENCE SETTINGS (CircuitBreaker + Auto-Reconnect)
# =============================================================================
# Enable resilience features for tests to ensure CircuitBreaker is active
MT5_ENABLE_CIRCUIT_BREAKER=true
MT5_ENABLE_AUTO_RECONNECT=true
MT5_CB_THRESHOLD=10
MT5_CB_RECOVERY=5.0
MT5_CB_HALF_OPEN_MAX=3
